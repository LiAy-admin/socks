# Socks 代理管理工具使用说明

## 脚本说明

这是一个用于 Ubuntu/Debian 系统的 Socks 代理管理工具，主要用于帮助用户在中国大陆访问开源社区（如 GitHub、GitLab、Docker Hub 等）。

### 主要特性：
- 一键配置系统级代理
- 支持 HTTP/HTTPS 协议
- 自动配置 APT 软件包管理器代理
- 多站点连接测试
- 多源下载速度测试
- 配置持久化保存
- 支持一键卸载

### 适用场景：
- 开发者需要访问 GitHub、GitLab 等代码托管平台
- 需要下载开源软件包和依赖
- 使用 Docker、NPM、PyPI 等包管理工具
- 访问开发者社区和文档网站

### 环境要求：
- 操作系统：Ubuntu/Debian
- 权限要求：需要 root 权限
- 依赖工具：curl、wget（脚本会自动安装）

## 安装方法

1. 下载安装脚本：
```bash
git clone https://github.com/yourusername/socks.git
cd socks
```

2. 运行安装脚本：
```bash
sudo bash install.sh
```

## 使用方法

### 1. 交互式菜单

在终端中输入以下命令启动交互式管理菜单：
```bash
socks
```

菜单选项说明：
1. 启动代理：配置并启用系统代理
2. 禁用代理：关闭并清除代理设置
3. 代理状态：显示当前代理配置信息
4. 测试代理：检查与 GitHub/GitLab 的连接状态
5. 网速测试：测试代理下载速度和网络延迟
6. 卸载代理：完全移除代理配置
0. 退出：退出管理菜单

### 2. 命令行快捷方式

除了使用交互式菜单，您还可以直接使用以下命令：
- `proxy_on`: 快速启用代理
- `proxy_off`: 快速禁用代理

### 3. 代理配置信息
#### 例如：
- 代理服务器：127.0.0.1
- 端口：1080
- 协议：HTTP/HTTPS

### 4. 功能特点

1. 系统级代理：
   - 自动配置系统环境变量
   - 配置 APT 软件包管理器代理
   - 设置全局 HTTP/HTTPS 代理

2. 持久化存储：
   - 代理设置在系统重启后仍然有效
   - 自动备份原有配置文件

3. 测试功能：
   - 多站点连接测试：
     * 代码托管：GitHub、GitLab
     * 包管理器：Docker Hub、PyPI、NPM、Maven、RubyGems、Golang、Rust Crates
     * 开发资源：Stack Overflow、Google
   - 多站点下载速度测试：
     * 代码托管：GitHub Release、GitLab Release
     * 容器和包管理：Docker Image、Python Package、Node Package、Maven Package
     * 开发工具：VS Code Extension
     * Linux 发行版：Ubuntu Package、Alpine Package、Debian Package
   - 显示详细的测试统计信息：
     * 连接测试：总站点数、成功数、成功率
     * 下载速度：实时速率（MB/s 或 KB/s）

### 5. 注意事项

1. 权限要求：
   - 安装和配置需要 root 权限
   - 建议使用 sudo 运行相关命令

2. 配置文件：
   - 环境变量配置：/etc/environment
   - APT 代理配置：/etc/apt/apt.conf.d/proxy.conf
   - 用户配置：~/.bashrc

3. 故障排查：
   - 如果代理无法连接，使用"测试代理"功能检查
   - 定期使用"网速测试"监控代理性能
   - 如遇问题可以查看备份文件恢复配置

4. 安全建议：
   - 定期更新系统和代理配置
   - 不使用时建议关闭代理
   - 重要操作前先测试代理状态

### 6. 备份和恢复

- 安装时会自动备份原有配置
- 备份文件位于原文件位置，带有时间戳
- 可以通过复制备份文件恢复原配置

### 7. 卸载方���

1. 使用菜单卸载：
   - 运行 `socks` 命令
   - 选择选项 6 "卸载代理"

2. 手动卸载：
   - 禁用代理（proxy_off）
   - 删除配置文件
   - 恢复备份文件（如需要）

## 常见问题

1. Q: 代理设置后无法生效？
   A: 尝试重新启动终端或运行 `source ~/.bashrc`

2. Q: 如何确认代理是否工作？
   A: 使用菜单中的"测试代理"功能或访问 GitHub 等网站

3. Q: 系统重启后需要重新设置吗？
   A: 不需要，配置会自动持久化保存

4. Q: 如何切换不同的代理服务器？
   A: 目前需要修改安装脚本中的代理服务器地址

5. Q: 为什么不同站点的下载速度差异很大？
   A: 这是正常现象，受多种因素影响：
      - 服务器地理位置不同
      - 网络路由不同
      - 服务器负载不同
      - 文件大小不同

6. Q: 如何选择最适合的下载源？
   A: 使用"网速测试"功能测试各个站点，选择速度最快的作为主要下载源

## 技术支持

如有问题或建议，请通过以下方式反馈：
1. 提交 GitHub Issue
2. 发送邮件至维护者
3. 在项目讨论区留言

## 更新日志

### v1.0.0 (2023-12-10)
- 初始版本发布
- 支持基本的代理管理功能
- 添加网速测试功能
- 实现配置持久化
